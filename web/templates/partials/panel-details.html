<div class="m-4">
  <div class="flex justify-between items-start gap-4 p-4">
    <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4">
      <button hx-get="/partials/panel" hx-target="#main-content" class="flex gap-2" type="button">
        <i data-lucide="arrow-left" size="12"></i>
        Voltar
      </button>
    </div>

    <div class="flex gap-4">
      <div
        class="w-20 h-20 bg-gradient-to-r from-emerald-500 to-green-600 rounded-full flex items-center justify-center shadow-lg">
        <span class="text-white font-bold text-xl">{{formatName .Client.Name}}</span>
      </div>

      <div class="flex flex-col items-start">
        <h2 class="text-2xl font-bold text-gray-900 mb-1">{{.Client.Name}}</h2>
        <p class="text-gray-600 text-lg mb-2">+{{.Client.Number}}</p>
        {{if eq .Client.Status "DONE"}}
        <span
          class="inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-green-50 text-green-700 border border-green-200">MARCADO</span>
        {{else if eq .Client.Status "PENDING"}}
        <span
          class="inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-yellow-50 text-yellow-700 border border-yellow-200">PENDENTE</span>
        {{else if eq .Client.Status "CANCELLED"}}
        <span
          class="inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-red-50 text-red-700 border border-red-200">CANCELADO</span>
        {{end}}
      </div>
    </div>
  </div>
</div>

<div class="flex-1 mx-4 mb-4 flex flex-col overflow-hidden bg-white rounded-lg border border-gray-200 p-6">
  <div id="chat-messages" class="flex-1 bg-gray-50 rounded-lg p-4 border border-gray-200 overflow-y-auto space-y-4">
    {{range .Messages}}
    <div class='flex {{if eq .Sender "user"}}justify-start{{else}}justify-end{{end}}'>
      <div
        class='max-w-xs lg:max-w-md px-4 py-3 rounded-2xl {{if eq .Sender "user"}}bg-white text-gray-800 border border-gray-300{{else}}bg-emerald-500 text-white{{end}} shadow-sm'>
        <p class="text-sm whitespace-pre-wrap mb-1">{{.Content}}</p>
        <p class='text-xs {{if eq .Sender "user"}}text-gray-500{{else}}text-emerald-200 opacity-80{{end}}'>
          {{formatDate .Timestamp}}</p>
      </div>
    </div>
    {{else}}
    <div class="text-center py-12">
      <i data-lucide="message-circle" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
      <p class="text-gray-500">Nenhuma mensagem ainda.</p>
    </div>
    {{end}}
  </div>

  <div class="pt-4">
    <div class="flex space-x-3">
      <input type="text" id="messageInput" placeholder="Digite uma mensagem..."
        class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
      <button id="sendButton"
        class="px-6 py-3 bg-emerald-500 text-white font-medium rounded-lg hover:bg-emerald-600 transition-colors flex items-center space-x-2">
        <i data-lucide="send" class="w-4 h-4"></i>
        <span>Enviar</span>
      </button>
    </div>
  </div>
</div>
